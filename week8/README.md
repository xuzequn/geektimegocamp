# redis 性能分析
1、使用 redis benchmark 工具, 测试 10 20 50 100 200 1k 5k 字节 value 大小，redis get set 性能。

使用命令 redis-benchmark -t set,get -n 字节大小 -q 对redis 进行测试
| size (byte) | get (requests per secend) | set(requests per secend) |
| ---| --- | ---|
| 10 | 10000.00 | 10000.00 |
| 20 | 10000.00  | 20000.00 |
| 50 | 50000.00 | 25000.00 |
| 100 | 50000.00 | 33333.33 |
| 200 | 66666.66 | 33333.33 |
| 1000 | 50000.00 | 50000.00 |
| 5000 | 53763.44 | 53191.49 |
| 10000 | 54945.05 | 59880.24 |
| 20000 | 42826.55 | 50000.00 |
| 50000 | 55432.37 | 60313.63 |
| 100000 | 52219.32 | 59880.24 |
| 200000 | 56242.97 | 59719.32 |
| 1000000 | 52153.96 | 56436.59 |

当size小于50k，redis get set 操作性能随着size增大而增加
当size大于50k，redis get set 操作性能随着size增大而降低

2、写入一定量的 kv 数据, 根据数据大小 1w-50w 自己评估, 结合写入前后的 info memory 信息  , 分析上述不同 value 大小下，平均每个 key 的占用内存空间。

通过redis-cli 访问redis ，执行info memory 命令查看存入1w ~ 5w字节数据后内存情况

| size(byte) | used_memory | used_memory_human|
| ---| --- | ---|
| 0 | 1114720 | 1.06M |
| 1w | 1125024(+10,304) | 1.07M |
| 2w | 1145600(+10,304+20,576) | 1.09M |
| 5w | 1227520(+10,304+20,576+81,920) | 1.17M |
| 10w | 1428288(+10,304+20,576+81,920+200,768) | 1.36M |
| 30w | 2030464(+10,304+20,576+81,920+200,768+602,176)| 1.94M |
| 40W | 2431936(+10,304+20,576+81,920+200,768+602,176+401,472) | 2.32M |
| 50w | 3435584(+10,304+20,576+81,920+200,768+602,176+401,472+1,003,648)| 3.28M |

通过观察 特别是存入value 为30w 40w 50w 字节时，每增加10w字节，增加的内存使用逐渐增加。